!function(e,t,n){"use strict";function o(o,l,s){function c(){return l.children().length}function d(e){q=t.isString(z.dropzone)?t.element(z.dropzone):t.element("<"+e.prop("localName")+">"),q.addClass("drop-zone"),z.sameSize&&q.css({height:e.prop("clientHeight")+"px",width:e.prop("clientWidth")+"px"}),e.after(q)}function u(e,t){for(var n=0;n<t.length;n++){var o=t.eq(n),r=o.data("sortable.computedStyle");o.css({height:r.height,width:r.width})}var a=e[0].getBoundingClientRect(),i=e.data("sortable.computedStyle");e.addClass("dragging").css({height:i.height,left:a.left-i.marginLeft.slice(0,-2)+"px",pointerEvents:"none",position:"fixed",top:a.top-i.marginTop.slice(0,-2)+"px",width:i.width,zIndex:100})}function g(e){for(var t=l.children(),n=document.elementFromPoint(e.x,e.y),o=0;o<t.length;o++)if(t[o]===n||t[o].contains(n))return t[o]}function p(e){return Array.prototype.indexOf.call(l.children(),e[0])}function h(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function m(e){e.preventDefault(),e.stopPropagation(),C=t.element(e.currentTarget),M.x=e.pageX,M.y=e.pageY,document.addEventListener(a,f),document.addEventListener(i,v)}function f(e){e.preventDefault();var t={x:e.pageX-M.x,y:e.pageY-M.y};h(t)<z.threshold||(C.hasClass("dragging")||y(C,C.children()),x(e,C,t))}function v(e){document.removeEventListener(a,f),document.removeEventListener(i,v),C.hasClass("dragging")&&b(e,C,C.children())}function b(e,n,o){var r=n.data("sortable.index"),a=p(q);a>r&&a--,S(n.removeClass("dragging"));for(var i=0;i<o.length;i++)S(o.eq(i));t.isArray($.sequence)?(q.remove(),s.$apply(function(){$.sequence.splice(a,0,$.sequence.splice(r,1)[0])})):q.replaceWith(n),t.isFunction($.dragEnd)&&$.dragEnd(n,a,r,$.sequence)}function x(e,n,o){n.css("transform","translate("+o.x+"px, "+o.y+"px)");var r={x:e.pageX,y:e.pageY},a=g(r);a&&a!==q[0]&&w(r,a),t.isFunction($.dragMove)&&$.dragMove(n)}function y(e,n){E(e);for(var o=0;o<n.length;o++)E(n.eq(o));u(e,n),d(e.data("sortable.index",p(e))),t.isFunction($.dragStart)&&$.dragStart(e)}function E(t){t.data("sortable.style",t.attr("style")||""),t.data("sortable.computedStyle")||t.data("sortable.computedStyle",e.getComputedStyle(t[0]))}function S(e){e.attr("style",e.data("sortable.style"))}function w(e,t){e.y-t.getBoundingClientRect().top>t.clientHeight>>1?t.nextElementSibling!==q[0]&&l[0].insertBefore(q[0],t.nextElementSibling):t.previousElementSibling!==q[0]&&l[0].insertBefore(q[0],t)}var q,C,$=this,z={dropzone:n,sameSize:!0,threshold:2},M={};$.options&&t.extend(z,$.options),""===o.sortable&&($.sortable=!0),s.$watch(c,function(e){if(e){var t=l.children();$.sortable&&t.on(r,m)}}),s.$watch("$sortable.sortable",function(e){var t=l.children();e?t.on(r,m):t.off(r,m)})}var r="ontouchstart"in document.documentElement?"touchstart":"mousedown",a="ontouchmove"in document.documentElement?"touchmove":"mousemove",i="ontouchend"in document.documentElement?"touchend":"mouseup";o.$inject=["$attrs","$element","$scope"],t.module("sortable",[]).directive("sortable",function(){return{controller:o,controllerAs:"$sortable",bindToController:{options:"=?",dragEnd:"=?",dragMove:"=?",dragStart:"=?",sequence:"=?ngModel",sortable:"=?"}}})}(window,angular);